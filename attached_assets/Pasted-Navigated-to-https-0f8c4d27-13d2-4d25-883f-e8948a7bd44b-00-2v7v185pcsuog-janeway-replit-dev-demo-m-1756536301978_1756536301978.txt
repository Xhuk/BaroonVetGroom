Navigated to https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/demo-map
demo-map:71 MapTiler API key loaded successfully
client:536 WebSocket connection to 'wss://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/?token=B8XWR_S2cvpf' failed: 
setupWebSocket @ client:536
(anonymous) @ client:531
client:536 Uncaught (in promise) SyntaxError: Failed to construct 'WebSocket': The URL 'wss://localhost:undefined/?token=B8XWR_S2cvpf' is invalid.
    at setupWebSocket (client:536:19)
    at fallback (client:509:16)
    at WebSocket.<anonymous> (client:555:7)
setupWebSocket @ client:536
fallback @ client:509
(anonymous) @ client:555
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: null, isLoading: true, error: undefined, isAuthenticated: false}
 ğŸ” [useAuth] Auth state: {user: null, isLoading: true, error: undefined, isAuthenticated: false}
 ğŸ“± Device Detection: desktop, landscape: true, useRibbon: false, hideSidebar: false
 ğŸ—ºï¸ Using vanilla Leaflet (like your working HTML example)
 ğŸ—ºï¸ Initializing vanilla Leaflet map
 ğŸ—ºï¸ Map created: NewClassÂ {options: {â€¦}, _handlers: Array(7), _layers: {â€¦}, _zoomBoundLayers: {â€¦}, _sizeChanged: false,Â â€¦}
 ğŸ—ºï¸ Map center: LatLngÂ {lat: 24.8066, lng: -107.3938}
 ğŸ—ºï¸ Map zoom: 13
 ğŸ”„ Using backend tile proxy to bypass Replit browser restrictions
 ğŸ”— Base URL: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev
 ğŸ”„ Frontend: Tile layer loading started
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1651/3512.png for coords: PointÂ {x: 1651, y: 3512, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1652/3512.png for coords: PointÂ {x: 1652, y: 3512, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1651/3513.png for coords: PointÂ {x: 1651, y: 3513, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1652/3513.png for coords: PointÂ {x: 1652, y: 3513, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1651/3511.png for coords: PointÂ {x: 1651, y: 3511, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1652/3511.png for coords: PointÂ {x: 1652, y: 3511, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1650/3512.png for coords: PointÂ {x: 1650, y: 3512, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1653/3512.png for coords: PointÂ {x: 1653, y: 3512, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1650/3513.png for coords: PointÂ {x: 1650, y: 3513, z: 13}
 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1653/3513.png for coords: PointÂ {x: 1653, y: 3513, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1651/3514.png for coords: PointÂ {x: 1651, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1652/3514.png for coords: PointÂ {x: 1652, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1650/3511.png for coords: PointÂ {x: 1650, y: 3511, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1653/3511.png for coords: PointÂ {x: 1653, y: 3511, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1650/3514.png for coords: PointÂ {x: 1650, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1653/3514.png for coords: PointÂ {x: 1653, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1649/3512.png for coords: PointÂ {x: 1649, y: 3512, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1654/3512.png for coords: PointÂ {x: 1654, y: 3512, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1649/3513.png for coords: PointÂ {x: 1649, y: 3513, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1654/3513.png for coords: PointÂ {x: 1654, y: 3513, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1649/3511.png for coords: PointÂ {x: 1649, y: 3511, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1654/3511.png for coords: PointÂ {x: 1654, y: 3511, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1649/3514.png for coords: PointÂ {x: 1649, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:52 ğŸ”— Custom tile URL generated: https://0f8c4d27-13d2-4d25-883f-e8948a7bd44b-00-2v7v185pcsuog.janeway.replit.dev/api/tiles/osm/13/1654/3514.png for coords: PointÂ {x: 1654, y: 3514, z: 13}
DemoMap.tsx:67 ğŸ”„ Frontend requesting tile: UNDEFINED URL!
DemoMap.tsx:116 ğŸ”— Proxy tile layer added
DemoMap.tsx:135 ğŸ“ Marker added: ClÃ­nica Veterinaria
DemoMap.tsx:135 ğŸ“ Marker added: Las Flores
DemoMap.tsx:135 ğŸ“ Marker added: El Bosque
DemoMap.tsx:135 ğŸ“ Marker added: Villa Real
DemoMap.tsx:157 ğŸ‰ Vanilla Leaflet map initialization complete
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: false, userEmail: undefined, userTenantsLength: 0, currentTenant: undefined, isLoadingTenants: false}
TenantContext.tsx:95 ğŸ” [TenantContext] Not authenticated, skipping
TenantContext.tsx:291 ğŸ¯ [TenantContext] Final context value: {currentTenant: undefined, currentTenantName: undefined, tenant: undefined, localCurrentTenant: undefined, isLoading: false}
LanguageContext.tsx:28 LanguageContext initialized: {currentLanguage: 'en', savedLanguage: 'en', available: Array(2)}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: null, isLoading: true, error: undefined, isAuthenticated: false}
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: false, userEmail: undefined, userTenantsLength: 0, currentTenant: undefined, isLoadingTenants: false}
TenantContext.tsx:95 ğŸ” [TenantContext] Not authenticated, skipping
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: true, userEmail: 'dongadgetoshop@gmail.com', userTenantsLength: 0, currentTenant: undefined, isLoadingTenants: false}
TenantContext.tsx:102 ğŸ” [TenantContext] Debug mode check: {debugMode: false, storedTenantId: null, isDebugUser: false, allTenantsLength: 0}
TenantContext.tsx:138 ğŸ” [TenantContext] Priority 3: Checking demo/vanilla users: {userEmail: 'dongadgetoshop@gmail.com', isDemo: false, isAdmin: false, userTenantsAvailable: false, userTenants: Array(0)}
TenantContext.tsx:189 ğŸ” [TenantContext] Not a demo/vanilla user
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
DemoMap.tsx:105 âœ… Frontend: Tile layer finished loading (0 tiles, 24 errors)
errorSuppression.ts:66 âš ï¸ No tiles loaded on frontend despite backend success - checking tile layer visibility
overrideMethod @ hook.js:608
console.warn @ errorSuppression.ts:66
(anonymous) @ DemoMap.tsx:108
Function.call @ errorSuppression.ts:80
fire @ chunk-JQURRHX6.js?v=2de63857:387
_tileReady @ chunk-JQURRHX6.js?v=2de63857:7832
Function.call @ errorSuppression.ts:80
_tileReady @ chunk-JQURRHX6.js?v=2de63857:8050
_tileOnLoad @ chunk-JQURRHX6.js?v=2de63857:7993
Function.call @ errorSuppression.ts:80
handler @ chunk-JQURRHX6.js?v=2de63857:1733
DemoMap.tsx:109 ğŸ” Map container size: 1278 x 700
DemoMap.tsx:110 ğŸ” Tile layer opacity: 1
DemoMap.tsx:111 ğŸ” Tile layer URL template: 
DemoMap.tsx:154 ğŸ—ºï¸ Map size invalidated
all.js:6 >=116
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
TenantContext.tsx:51 ğŸ” [TenantContext] Fetching user tenants...
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: true, userEmail: 'dongadgetoshop@gmail.com', userTenantsLength: 0, currentTenant: undefined, isLoadingTenants: true}
TenantContext.tsx:102 ğŸ” [TenantContext] Debug mode check: {debugMode: false, storedTenantId: null, isDebugUser: true, allTenantsLength: 0}
TenantContext.tsx:138 ğŸ” [TenantContext] Priority 3: Checking demo/vanilla users: {userEmail: 'dongadgetoshop@gmail.com', isDemo: false, isAdmin: false, userTenantsAvailable: false, userTenants: Array(0)}
TenantContext.tsx:189 ğŸ” [TenantContext] Not a demo/vanilla user
TenantContext.tsx:291 ğŸ¯ [TenantContext] Final context value: {currentTenant: undefined, currentTenantName: undefined, tenant: undefined, localCurrentTenant: undefined, isLoading: true}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:121 ğŸ”„ Forced map size invalidation and redraw
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
TenantContext.tsx:53 ğŸ” [TenantContext] User tenants response: 200
TenantContext.tsx:58 ğŸ” [TenantContext] User tenants received: 1 tenants: [{â€¦}]
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: true, userEmail: 'dongadgetoshop@gmail.com', userTenantsLength: 1, currentTenant: undefined, isLoadingTenants: false}
TenantContext.tsx:102 ğŸ” [TenantContext] Debug mode check: {debugMode: false, storedTenantId: null, isDebugUser: true, allTenantsLength: 0}
TenantContext.tsx:138 ğŸ” [TenantContext] Priority 3: Checking demo/vanilla users: {userEmail: 'dongadgetoshop@gmail.com', isDemo: false, isAdmin: false, userTenantsAvailable: true, userTenants: Array(1)}
TenantContext.tsx:189 ğŸ” [TenantContext] Not a demo/vanilla user
TenantContext.tsx:291 ğŸ¯ [TenantContext] Final context value: {currentTenant: undefined, currentTenantName: undefined, tenant: undefined, localCurrentTenant: undefined, isLoading: false}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
InstantNavigation.tsx:17 ğŸ¯ [InstantNavigation] Preloading data for tenant: vetgroom1
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: true, userEmail: 'dongadgetoshop@gmail.com', userTenantsLength: 1, currentTenant: 'vetgroom1', isLoadingTenants: false}
TenantContext.tsx:102 ğŸ” [TenantContext] Debug mode check: {debugMode: false, storedTenantId: null, isDebugUser: true, allTenantsLength: 0}
TenantContext.tsx:192 ğŸ” [TenantContext] Priority 3 skipped: {hasEmail: true, hasCurrentTenant: true, debugMode: false}
TenantContext.tsx:291 ğŸ¯ [TenantContext] Final context value: {currentTenant: 'vetgroom1', currentTenantName: 'vetgroom1', tenant: undefined, localCurrentTenant: 'vetgroom1', isLoading: true}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
TenantContext.tsx:86 ğŸ” [TenantContext] useEffect triggered: {isAuthenticated: true, userEmail: 'dongadgetoshop@gmail.com', userTenantsLength: 1, currentTenant: 'vetgroom1', isLoadingTenants: false}
TenantContext.tsx:102 ğŸ” [TenantContext] Debug mode check: {debugMode: false, storedTenantId: null, isDebugUser: true, allTenantsLength: 6}
TenantContext.tsx:192 ğŸ” [TenantContext] Priority 3 skipped: {hasEmail: true, hasCurrentTenant: true, debugMode: false}
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
useAuth.ts:55 ğŸ” [useAuth] Auth state: {user: {â€¦}, isLoading: false, error: undefined, isAuthenticated: true}
TenantContext.tsx:291 ğŸ¯ [TenantContext] Final context value: {currentTenant: 'vetgroom1', currentTenantName: 'Vetgroom1', tenant: 'vetgroom1', localCurrentTenant: 'vetgroom1', isLoading: false}
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
DemoMap.tsx:89 ğŸ” Direct test of failed tile: 200 OK
DemoMap.tsx:93 ğŸ” Blob size: 44479 bytes, type: text/html
